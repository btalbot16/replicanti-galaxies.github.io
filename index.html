<!DOCTYPE html>
<html>
  <head>
    <title> Replicanti Galaxies </title>
    <link rel="icon" href="favicon.png" type="image"/>
    <style>
	    pre{text-align:center} 
	    #cprice{padding:2px;display:inline;} 
	    #matter{text-align:center} #replicanti{text-align:center} 
	    #amount:hover{text-decoration:underline}
	    #settings{bottom:0; position:fixed;margin: 5% auto;left: 0;right: 0;}
    </style>
  </head>
  <body>
    <div id="replicanti">
      <pre id="ramount">you have 1 replicanti</pre>
      <pre id="chance">replicate chance: 10%</pre>
      <pre id="tickspeed">tickspeed: 1000ms</pre>
    </div>
    <br>
    <div id="matter">
      <pre id="amount">you have 0 matter (+0)</pre>
      <pre id="reduction">0% reduction to tickspeed</pre>
      <pre id="cprice" style="border: 1px solid black; border-radius: 5px">1000 matter to upgrade chance</pre>
    </div>
    <br>
    <div id="settings">
      <pre id="update"><pre id="updaterate">update rate: 50ms</pre><input type="range" min="20" max="200" value="50" id="updateRange"></pre>
      <pre id="notation">notation: <br>standard</pre>
    </div>
    
    <script>
      //begin script.js

      function a(a){return document.getElementById(a)}
      
      var replicanti = 1;
      var chance = 10;
      var tickspeed = 1000;
      var updateRate = 50;
      
      var matter = 0;
      var matterOnPrestige = 0;
      var cprice = 1000;
      
      function updateHTML(){
        a("amount").innerHTML = "you have " + replicanti + " replicanti";
        a("chance").innerHTML = "replicate chance: " + chance + "%";
        a("tickspeed").innerHTML = "tickspeed: " + tickspeed + "ms";
        a("amount").innerHTML = "you have " + matter + " matter (+" + matterOnPrestige +")";
        a("cprice").innerHTML = cprice + " matter to upgrade chance";
        a("updaterate").innerHTML = "update rate: " + updateRate + "ms"
        
        if(!matter){a("reduction").innerHTML = "0% reduction to tickspeed"} else {a("reduction").innerHTML = tickspeed/matter + "% reduction to tickspeed"}
      }
      
      updateLoop = window.setInterval(updateHTML(), updateRate)
      replicantiLoop = window.setInterval(updateReplicanti(), tickspeed)
      
      var slider = a("updateRange")

      slider.oninput = function() {
          updateRate = slider.value;
          clearInterval(updateLoop)
          updateLoop = window.setInterval(updateHTML(), updateRate)
      }
      
      function updateReplicanti(){
        if(replicanti < 100){
          for(i=0;i<replicanti;i++){
             if(chance > Math.random()*100){
              replicanti++;
             }
          }
        } else {
            let x = 0;
            for(i=0;i<100;i++){
		if(chance > Math.random()*100){
			x++
		} 
	    }
            replicanti = Math.floor(replicanti*(1+x/100));
        }
      }
      
      //end script.js
    </script>
  </body>
</html>
